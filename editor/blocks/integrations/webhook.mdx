---
title: Requisição HTTP
---

import { LoomVideo } from '/snippets/loom-video.mdx'

O bloco de Requisição HTTP permite enviar uma solicitação HTTP a um serviço de terceiros. Isso é útil para enviar informações do bot para outro serviço ou buscar informações de outro serviço e usá-las no bot.

## Fazer uma solicitação de API e buscar dados

Isso fica mais técnico, pois você precisará saber mais sobre os parâmetros da solicitação HTTP.

Muitos serviços oferecem uma API. Eles também, muito provavelmente, têm uma documentação da API. Dependendo dos parâmetros que você está fornecendo ao bloco de solicitação HTTP, ele deve retornar informações diferentes do serviço de terceiros.

## Corpo personalizado

Você pode definir um corpo personalizado com suas variáveis coletadas. Aqui está um exemplo de trabalho:

```json
{
  "nome": "{{Nome}}",
  "e-mail": "{{Email}}"
}
```

### Exemplo com uma API fictícia: CRIAR e OBTER

Este vídeo fornece um guia passo a passo para configurar com sucesso os blocos de solicitação HTTP no Typebot.

Demonstro como configurar o bloco de solicitação HTTP, incluindo o URL, método e corpo personalizado. Também mostro como testar a solicitação e salvar o ID do novo funcionário recém-criado. Finalmente, explico como implementar o endpoint de encontrar funcionário por ID e mapear o nome do funcionário para uma variável.

<LoomVideo id="d9aef6a37e0c43759b31be7d69c4dd6d" />

### Exemplo: buscar informações de filme

LVamos criar um bot que solicita um filme e recupera suas informações (enviando uma solicitação HTTP para a [API OMDB](http://www.omdbapi.com/)).

Pela documentação, sei que ao chamar esta URL específica: http://www.omdbapi.com/?t=Star%20Wars&apikey=1eb4670b, ele procurará as informações do filme "Star Wars" e retornará os dados JSON.

O que preciso no meu caso é, em vez de inserir "Star Wars", gostaria de inserir uma variável Typebot:

<Frame>
  <img
    src="/images/blocks/integrations/webhook/variable-url.png"
    alt="Variable in URL"
  />
</Frame>

Em seguida, podemos definir um valor de teste para nossa variável (ele substituirá a variável por este valor apenas para o botão "Testar a solicitação"):

<Frame style={{ maxWidth: '300px' }}>
  <img
    src="/images/blocks/integrations/webhook/variable-test-value.png"
    alt="Variable test values"
  />
</Frame>

Clique no botão "Testar a solicitação" e depois podemos salvar o resultado em várias variáveis:

<Frame style={{ maxWidth: '400px' }}>
  <img
    src="/images/blocks/integrations/webhook/save-in-variable.png"
    alt="Test request"
  />
</Frame>

Em seguida, podemos usar essas variáveis para exibir conteúdo dinâmico nas próximas bolhas:

<Frame>
  <img src="/images/blocks/integrations/webhook/preview.png" alt="Visualização" />
</Frame>

As possibilidades são infinitas quando se trata de chamadas de API, você pode literalmente chamar qualquer API e buscar os dados que desejar.

## Chamar um URL de Webhook

Seu serviço de terceiros (Make.com, Zapier, etc) está fornecendo um URL de Webhook.

Você só precisa colar este URL no bloco de Webhook e clicar em "Testar a solicitação". Por padrão, o serviço de terceiros receberá um snapshot do que o bot poderia enviar.

<Frame>
  <img
    src="/images/blocks/integrations/webhook/simple-post.png"
    alt="Simple Webhook POST"
  />
</Frame>

Você também pode decidir personalizar a solicitação enviada ao serviço de terceiros.

## Tempo limite

Por padrão, o bloco de Webhook aguardará 10 segundos para que o serviço de terceiros responda. Se não responder a tempo, o bloco falhará. Você pode personalizar esse valor de tempo limite nas configurações do bloco de Webhook em "Parâmetros avançados".

## Solução de problemas

A solicitação do bloco de Webhook falhou ou parece não ter sido acionada? Certifique-se de verificar os [logs](/results/overview#logs).

### Webhook nao é executado na ordem correta?

Isto é esperado, o typebot na verdade computa todos os blocos entre cada bloco de inserção de um servidor antes de mostrar qualquer coisa.
<LoomVideo id="9cc00a9a8c8245709d6322f197c9fb45" />
